(()=>{var e={18:e=>{"use strict";e.exports=require("tty")},23:e=>{"use strict";e.exports=require("util")},33:(e,n,t)=>{var r=t(18),s=t(23);(n=e.exports=t(910)).init=function(e){e.inspectOpts={};for(var t=Object.keys(n.inspectOpts),r=0;r<t.length;r++)e.inspectOpts[t[r]]=n.inspectOpts[t[r]]},n.log=function(){return a.write(s.format.apply(s,arguments)+"\n")},n.formatArgs=function(e){var t=this.namespace;if(this.useColors){var r=this.color,s="  [3"+r+";1m"+t+" [0m";e[0]=s+e[0].split("\n").join("\n"+s),e.push("[3"+r+"m+"+n.humanize(this.diff)+"[0m")}else e[0]=(new Date).toUTCString()+" "+t+" "+e[0]},n.save=function(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},n.load=i,n.useColors=function(){return"colors"in n.inspectOpts?Boolean(n.inspectOpts.colors):r.isatty(o)},n.colors=[6,2,3,4,5,1],n.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,n){var t=n.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,n){return n.toUpperCase()}),r=process.env[n];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[t]=r,e},{});var o=parseInt(process.env.DEBUG_FD,10)||2;1!==o&&2!==o&&s.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var a=1===o?process.stdout:2===o?process.stderr:function(e){var n;switch(process.binding("tty_wrap").guessHandleType(e)){case"TTY":(n=new r.WriteStream(e))._type="tty",n._handle&&n._handle.unref&&n._handle.unref();break;case"FILE":(n=new(t(896).SyncWriteStream)(e,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":(n=new(t(278).Socket)({fd:e,readable:!1,writable:!0})).readable=!1,n.read=null,n._type="pipe",n._handle&&n._handle.unref&&n._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return n.fd=e,n._isStdio=!0,n}(o);function i(){return process.env.DEBUG}n.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts).split("\n").map(function(e){return e.trim()}).join(" ")},n.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,s.inspect(e,this.inspectOpts)},n.enable(i())},157:e=>{"use strict";e.exports=require("electron")},278:e=>{"use strict";e.exports=require("net")},313:(e,n,t)=>{var r=t(928),s=t(317).spawn,o=t(753)("electron-squirrel-startup"),a=t(157).app,i=function(e,n){var t=r.resolve(r.dirname(process.execPath),"..","Update.exe");o("Spawning `%s` with args `%s`",t,e),s(t,e,{detached:!0}).on("close",n)};e.exports=function(){if("win32"===process.platform){var e=process.argv[1];o("processing squirrel command `%s`",e);var n=r.basename(process.execPath);if("--squirrel-install"===e||"--squirrel-updated"===e)return i(["--createShortcut="+n],a.quit),!0;if("--squirrel-uninstall"===e)return i(["--removeShortcut="+n],a.quit),!0;if("--squirrel-obsolete"===e)return a.quit(),!0}return!1}()},317:e=>{"use strict";e.exports=require("child_process")},585:e=>{var n=1e3,t=60*n,r=60*t,s=24*r;function o(e,n,t){if(!(e<n))return e<1.5*n?Math.floor(e/n)+" "+t:Math.ceil(e/n)+" "+t+"s"}e.exports=function(e,a){a=a||{};var i,c=typeof e;if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(o){var a=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"days":case"day":case"d":return a*s;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*t;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===c&&!1===isNaN(e))return a.long?o(i=e,s,"day")||o(i,r,"hour")||o(i,t,"minute")||o(i,n,"second")||i+" ms":function(e){return e>=s?Math.round(e/s)+"d":e>=r?Math.round(e/r)+"h":e>=t?Math.round(e/t)+"m":e>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},753:(e,n,t)=>{"undefined"!=typeof process&&"renderer"===process.type?e.exports=t(833):e.exports=t(33)},833:(e,n,t)=>{function r(){var e;try{e=n.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(n=e.exports=t(910)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),t){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var s=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(s++,"%c"===e&&(o=s))}),e.splice(o,0,r)}},n.save=function(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}},n.load=r,n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},n.enable(r())},896:e=>{"use strict";e.exports=require("fs")},910:(e,n,t)=>{var r;function s(e){function t(){if(t.enabled){var e=t,s=+new Date,o=s-(r||s);e.diff=o,e.prev=r,e.curr=s,r=s;for(var a=new Array(arguments.length),i=0;i<a.length;i++)a[i]=arguments[i];a[0]=n.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var c=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(t,r){if("%%"===t)return t;c++;var s=n.formatters[r];if("function"==typeof s){var o=a[c];t=s.call(e,o),a.splice(c,1),c--}return t}),n.formatArgs.call(e,a),(t.log||n.log||console.log.bind(console)).apply(e,a)}}return t.namespace=e,t.enabled=n.enabled(e),t.useColors=n.useColors(),t.color=function(e){var t,r=0;for(t in e)r=(r<<5)-r+e.charCodeAt(t),r|=0;return n.colors[Math.abs(r)%n.colors.length]}(e),"function"==typeof n.init&&n.init(t),t}(n=e.exports=s.debug=s.default=s).coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){n.enable("")},n.enable=function(e){n.save(e),n.names=[],n.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),r=t.length,s=0;s<r;s++)t[s]&&("-"===(e=t[s].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))},n.enabled=function(e){var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=t(585),n.names=[],n.skips=[],n.formatters={}},928:e=>{"use strict";e.exports=require("path")}},n={};function t(r){var s=n[r];if(void 0!==s)return s.exports;var o=n[r]={exports:{}};return e[r](o,o.exports,t),o.exports}(()=>{"use strict";var e=t(157),n=t(928);const r=require("sqlite3");let s,o;t(313)&&e.app.quit();const a=()=>{s=new e.BrowserWindow({height:800,width:1200,minHeight:600,minWidth:800,titleBarStyle:"hiddenInset",webPreferences:{nodeIntegration:!1,contextIsolation:!0,preload:n.join(__dirname,"preload.js")}}),s.loadFile(n.join(__dirname,"../renderer/index.html"))};e.app.whenReady().then(()=>{a(),(()=>{const t=n.join(e.app.getPath("userData"),"dear-bones.db");o=new r.Database(t),o.serialize(()=>{o.run("\n      CREATE TABLE IF NOT EXISTS decks (\n        id TEXT PRIMARY KEY,\n        name TEXT NOT NULL,\n        description TEXT,\n        emoji TEXT,\n        tags TEXT,\n        created_at INTEGER NOT NULL,\n        updated_at INTEGER NOT NULL,\n        card_count INTEGER DEFAULT 0\n      )\n    "),o.run("\n      CREATE TABLE IF NOT EXISTS cards (\n        id TEXT PRIMARY KEY,\n        deck_id TEXT NOT NULL,\n        front TEXT NOT NULL,\n        back TEXT NOT NULL,\n        tags TEXT,\n        created_at INTEGER NOT NULL,\n        updated_at INTEGER NOT NULL,\n        last_studied INTEGER,\n        study_count INTEGER DEFAULT 0,\n        difficulty REAL DEFAULT 0,\n        interval INTEGER DEFAULT 1,\n        ease_factor REAL DEFAULT 2.5,\n        FOREIGN KEY (deck_id) REFERENCES decks (id) ON DELETE CASCADE\n      )\n    "),o.run("\n      CREATE TABLE IF NOT EXISTS study_sessions (\n        id TEXT PRIMARY KEY,\n        deck_id TEXT NOT NULL,\n        card_id TEXT NOT NULL,\n        confidence INTEGER NOT NULL,\n        response_time INTEGER NOT NULL,\n        studied_at INTEGER NOT NULL,\n        FOREIGN KEY (deck_id) REFERENCES decks (id) ON DELETE CASCADE,\n        FOREIGN KEY (card_id) REFERENCES cards (id) ON DELETE CASCADE\n      )\n    "),o.run("\n      CREATE TABLE IF NOT EXISTS settings (\n        key TEXT PRIMARY KEY,\n        value TEXT NOT NULL\n      )\n    ")})})(),e.app.on("activate",()=>{0===e.BrowserWindow.getAllWindows().length&&a()})}),e.app.on("window-all-closed",()=>{"darwin"!==process.platform&&e.app.quit()}),e.ipcMain.handle("db-get-decks",()=>new Promise((e,n)=>{o.all("SELECT * FROM decks ORDER BY updated_at DESC",(t,r)=>{t?n(t):e(r)})})),e.ipcMain.handle("db-create-deck",(e,n)=>new Promise((e,t)=>{const r=o.prepare("\n      INSERT INTO decks (id, name, description, emoji, tags, created_at, updated_at)\n      VALUES (?, ?, ?, ?, ?, ?, ?)\n    ");r.run([n.id,n.name,n.description,n.emoji,JSON.stringify(n.tags),Date.now(),Date.now()],function(r){r?t(r):e({id:n.id})}),r.finalize()})),e.ipcMain.handle("export-data",async()=>{const n=await e.dialog.showSaveDialog(s,{defaultPath:"dear-bones-export.json",filters:[{name:"JSON Files",extensions:["json"]}]});return!n.canceled&&n.filePath?n.filePath:null}),e.app.on("before-quit",()=>{o&&o.close()})})()})();
//# sourceMappingURL=index.js.map